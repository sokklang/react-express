{"ast":null,"code":"import React from\"react\";import{useState,useEffect}from\"react\";import defaultProfileImage from\"./profile.jpg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Updateprofile=_ref=>{let{showModal,handleClose,profileImage,updateUserProfile}=_ref;const[selectedFile,setSelectedFile]=useState();const[imagePreview,SetImagePreview]=useState(profileImage);useEffect(()=>{SetImagePreview(profileImage);},[profileImage]);function handleChange(e){console.log(e.target.files);const file=e.target.files[0];if(file){setSelectedFile(file);// Create a Blob from the ArrayBuffer\nconst blob=new Blob([file],{type:file.type});// Use createObjectURL with the Blob\nSetImagePreview(URL.createObjectURL(blob));}}const handleUpdateImage=async()=>{try{if(selectedFile){// Use the FileReader API to read the Blob as an ArrayBuffer\nconst reader=new FileReader();reader.onload=async function(){const arrayBuffer=this.result;// Pass the ArrayBuffer to updateUserProfile\nawait updateUserProfile(arrayBuffer);};reader.readAsArrayBuffer(selectedFile);// Read the File object as an ArrayBuffer\n}else{console.error(\"No file selected\");}}catch(error){console.error(\"Error handling update image:\",error);}};const onClose=async()=>{SetImagePreview(profileImage);handleClose();};return/*#__PURE__*/_jsx(\"div\",{className:\"modal fade \".concat(showModal?\"show\":\"\"),style:{display:showModal?\"block\":\"none\"},\"data-bs-theme\":\"dark\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog\",role:\"document\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content text-white\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"modal-title\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-user-circle fa-fw me-2\"}),\"Update Profile\"]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:onClose})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body text-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"position-relative\",children:/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"profileImageInput\",className:\"profile-image-label\",children:[/*#__PURE__*/_jsx(\"img\",{src:imagePreview||defaultProfileImage,alt:\"Profile\",className:\"img-fluid rounded-circle profile-image mb-3\",style:{width:\"200px\",height:\"200px\",border:\"2px solid #000\"}}),/*#__PURE__*/_jsxs(\"div\",{className:\"overlay\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-upload fa-fw me-2\"}),\"Upload\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"profileImageInput\",className:\"visually-hidden\",onChange:handleChange})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:onClose,children:\"Close\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:handleUpdateImage,children:\"Submit\"})]})]})})});};export default Updateprofile;","map":{"version":3,"names":["React","useState","useEffect","defaultProfileImage","jsx","_jsx","jsxs","_jsxs","Updateprofile","_ref","showModal","handleClose","profileImage","updateUserProfile","selectedFile","setSelectedFile","imagePreview","SetImagePreview","handleChange","e","console","log","target","files","file","blob","Blob","type","URL","createObjectURL","handleUpdateImage","reader","FileReader","onload","arrayBuffer","result","readAsArrayBuffer","error","onClose","className","concat","style","display","children","role","onClick","htmlFor","src","alt","width","height","border","id","onChange"],"sources":["C:/Users/Administrator/Desktop/react-express/client/src/profile/Updateprofile.js"],"sourcesContent":["import React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport defaultProfileImage from \"./profile.jpg\";\r\n\r\nconst Updateprofile = ({\r\n  showModal,\r\n  handleClose,\r\n  profileImage,\r\n  updateUserProfile,\r\n}) => {\r\n  const [selectedFile, setSelectedFile] = useState();\r\n  const [imagePreview, SetImagePreview] = useState(profileImage);\r\n\r\n  useEffect(() => {\r\n    SetImagePreview(profileImage);\r\n  }, [profileImage]);\r\n\r\n  function handleChange(e) {\r\n    console.log(e.target.files);\r\n    const file = e.target.files[0];\r\n\r\n    if (file) {\r\n      setSelectedFile(file);\r\n\r\n      // Create a Blob from the ArrayBuffer\r\n      const blob = new Blob([file], { type: file.type });\r\n\r\n      // Use createObjectURL with the Blob\r\n      SetImagePreview(URL.createObjectURL(blob));\r\n    }\r\n  }\r\n  const handleUpdateImage = async () => {\r\n    try {\r\n      if (selectedFile) {\r\n        // Use the FileReader API to read the Blob as an ArrayBuffer\r\n        const reader = new FileReader();\r\n        reader.onload = async function () {\r\n          const arrayBuffer = this.result;\r\n\r\n          // Pass the ArrayBuffer to updateUserProfile\r\n          await updateUserProfile(arrayBuffer);\r\n        };\r\n        reader.readAsArrayBuffer(selectedFile); // Read the File object as an ArrayBuffer\r\n      } else {\r\n        console.error(\"No file selected\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error handling update image:\", error);\r\n    }\r\n  };\r\n\r\n  const onClose = async () => {\r\n    SetImagePreview(profileImage);\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`modal fade ${showModal ? \"show\" : \"\"}`}\r\n      style={{ display: showModal ? \"block\" : \"none\" }}\r\n      data-bs-theme=\"dark\"\r\n    >\r\n      <div className=\"modal-dialog\" role=\"document\">\r\n        <div className=\"modal-content text-white\">\r\n          <div className=\"modal-header\">\r\n            <h5 className=\"modal-title\">\r\n              <i className=\"fa fa-user-circle fa-fw me-2\"></i>Update Profile\r\n            </h5>\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn-close\"\r\n              onClick={onClose}\r\n            ></button>\r\n          </div>\r\n          <div className=\"modal-body text-center\">\r\n            <div className=\"position-relative\">\r\n              <label\r\n                htmlFor=\"profileImageInput\"\r\n                className=\"profile-image-label\"\r\n              >\r\n                <img\r\n                  src={imagePreview || defaultProfileImage}\r\n                  alt=\"Profile\"\r\n                  className=\"img-fluid rounded-circle profile-image mb-3\"\r\n                  style={{\r\n                    width: \"200px\",\r\n                    height: \"200px\",\r\n                    border: \"2px solid #000\",\r\n                  }}\r\n                />\r\n\r\n                <div className=\"overlay\">\r\n                  <i className=\"fa fa-upload fa-fw me-2\"></i>Upload\r\n                  <input\r\n                    type=\"file\"\r\n                    id=\"profileImageInput\"\r\n                    className=\"visually-hidden\"\r\n                    onChange={handleChange}\r\n                  />\r\n                </div>\r\n              </label>\r\n            </div>\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-secondary\"\r\n              onClick={onClose}\r\n            >\r\n              Close\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-primary\"\r\n              onClick={handleUpdateImage}\r\n            >\r\n              Submit\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Updateprofile;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}