{"ast":null,"code":"import React from\"react\";import{useState,useContext}from\"react\";import{AuthContext}from\"../context/AuthContext\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Updateinfo=_ref=>{let{showModal,handleClose}=_ref;const{firstname,lastname,email,handleSelfUpdate}=useContext(AuthContext);const[updatedFirstname,setUpdatedFirstname]=useState(firstname);const[updatedLastname,setUpdatedLastname]=useState(lastname);const[updatedEmail,setUpdatedEmail]=useState(email);const[successMessage,setSuccessMessage]=useState(\"\");const[errorMessage,setErrorMessage]=useState(\"\");const handleUpdateInfo=async e=>{e.preventDefault();const updateUserInfo={FirstName:updatedFirstname,LastName:updatedLastname,Email:updatedEmail};try{const response=await axios.put(\"http://localhost:5000/api/selfupdatedata\",updateUserInfo,{withCredentials:true});if(response.status===200){handleSelfUpdate(updateUserInfo);setSuccessMessage(response.data.message);setErrorMessage(\"\");}}catch(error){setSuccessMessage(\"\");setErrorMessage(error.response.data.message);}};const onClose=async()=>{setUpdatedFirstname(firstname);setUpdatedLastname(lastname);setUpdatedEmail(email);setErrorMessage(\"\");setSuccessMessage(\"\");handleClose();};return/*#__PURE__*/_jsx(\"div\",{className:\"modal fade \".concat(showModal?\"show\":\"\"),style:{display:showModal?\"block\":\"none\"},\"data-bs-theme\":\"dark\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"modal-title text-white\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-edit fa-fw me-2\"}),\"Update Info\"]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:onClose})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body text-white text-start\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUpdateInfo,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"formEditFirstName\",className:\"form-label\",children:\"First Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"formEditFirstName\",placeholder:\"Enter Firstname\",value:updatedFirstname,onChange:e=>setUpdatedFirstname(e.target.value.replace(/\\s/g,\"\"))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"formEditLastName\",className:\"form-label\",children:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"formEditLastName\",placeholder:\"Enter Lastname\",value:updatedLastname,onChange:e=>setUpdatedLastname(e.target.value.replace(/\\s/g,\"\"))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"formEditEmail\",className:\"form-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"formEditEmail\",placeholder:\"Enter Email\",value:updatedEmail,onChange:e=>setUpdatedEmail(e.target.value.replace(/\\s/g,\"\"))})]}),errorMessage?/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger mt-3\",role:\"alert\",children:errorMessage}):successMessage?/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success mt-3\",role:\"alert\",children:successMessage}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\"//onClick={handleEdit}\n,children:\"Submit\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:onClose,children:\"Close\"})]})]})})]})})});};export default Updateinfo;","map":{"version":3,"names":["React","useState","useContext","AuthContext","axios","jsx","_jsx","jsxs","_jsxs","Updateinfo","_ref","showModal","handleClose","firstname","lastname","email","handleSelfUpdate","updatedFirstname","setUpdatedFirstname","updatedLastname","setUpdatedLastname","updatedEmail","setUpdatedEmail","successMessage","setSuccessMessage","errorMessage","setErrorMessage","handleUpdateInfo","e","preventDefault","updateUserInfo","FirstName","LastName","Email","response","put","withCredentials","status","data","message","error","onClose","className","concat","style","display","children","type","onClick","onSubmit","htmlFor","id","placeholder","value","onChange","target","replace","role"],"sources":["C:/Users/Administrator/Desktop/react-express/client/src/profile/Updateinfo.js"],"sourcesContent":["import React from \"react\";\r\nimport { useState, useContext } from \"react\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport axios from \"axios\";\r\n\r\nconst Updateinfo = ({ showModal, handleClose }) => {\r\n  const { firstname, lastname, email, handleSelfUpdate } =\r\n    useContext(AuthContext);\r\n  const [updatedFirstname, setUpdatedFirstname] = useState(firstname);\r\n  const [updatedLastname, setUpdatedLastname] = useState(lastname);\r\n  const [updatedEmail, setUpdatedEmail] = useState(email);\r\n  const [successMessage, setSuccessMessage] = useState(\"\");\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n\r\n  const handleUpdateInfo = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const updateUserInfo = {\r\n      FirstName: updatedFirstname,\r\n      LastName: updatedLastname,\r\n      Email: updatedEmail,\r\n    };\r\n\r\n    try {\r\n      const response = await axios.put(\r\n        \"http://localhost:5000/api/selfupdatedata\",\r\n        updateUserInfo,\r\n        { withCredentials: true }\r\n      );\r\n\r\n      if (response.status === 200) {\r\n        handleSelfUpdate(updateUserInfo);\r\n        setSuccessMessage(response.data.message);\r\n        setErrorMessage(\"\");\r\n      }\r\n    } catch (error) {\r\n      setSuccessMessage(\"\");\r\n      setErrorMessage(error.response.data.message);\r\n    }\r\n  };\r\n\r\n  const onClose = async () => {\r\n    setUpdatedFirstname(firstname);\r\n    setUpdatedLastname(lastname);\r\n    setUpdatedEmail(email);\r\n    setErrorMessage(\"\");\r\n    setSuccessMessage(\"\");\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`modal fade ${showModal ? \"show\" : \"\"}`}\r\n      style={{ display: showModal ? \"block\" : \"none\" }}\r\n      data-bs-theme=\"dark\"\r\n    >\r\n      <div className=\"modal-dialog\">\r\n        <div className=\"modal-content\">\r\n          <div className=\"modal-header\">\r\n            <h5 className=\"modal-title text-white\">\r\n              <i className=\"fa fa-edit fa-fw me-2\"></i>Update Info\r\n            </h5>\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn-close\"\r\n              onClick={onClose}\r\n            ></button>\r\n          </div>\r\n          <div className=\"modal-body text-white text-start\">\r\n            <form onSubmit={handleUpdateInfo}>\r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"formEditFirstName\" className=\"form-label\">\r\n                  First Name\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  id=\"formEditFirstName\"\r\n                  placeholder=\"Enter Firstname\"\r\n                  value={updatedFirstname}\r\n                  onChange={(e) =>\r\n                    setUpdatedFirstname(e.target.value.replace(/\\s/g, \"\"))\r\n                  }\r\n                />\r\n              </div>\r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"formEditLastName\" className=\"form-label\">\r\n                  Last Name\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  id=\"formEditLastName\"\r\n                  placeholder=\"Enter Lastname\"\r\n                  value={updatedLastname}\r\n                  onChange={(e) =>\r\n                    setUpdatedLastname(e.target.value.replace(/\\s/g, \"\"))\r\n                  }\r\n                />\r\n              </div>\r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"formEditEmail\" className=\"form-label\">\r\n                  Email\r\n                </label>\r\n                <input\r\n                  type=\"email\"\r\n                  className=\"form-control\"\r\n                  id=\"formEditEmail\"\r\n                  placeholder=\"Enter Email\"\r\n                  value={updatedEmail}\r\n                  onChange={(e) =>\r\n                    setUpdatedEmail(e.target.value.replace(/\\s/g, \"\"))\r\n                  }\r\n                />\r\n              </div>\r\n\r\n              {/* Add more fields for editing, if necessary */}\r\n              {errorMessage ? (\r\n                <div className=\"alert alert-danger mt-3\" role=\"alert\">\r\n                  {errorMessage}\r\n                </div>\r\n              ) : successMessage ? (\r\n                <div className=\"alert alert-success mt-3\" role=\"alert\">\r\n                  {successMessage}\r\n                </div>\r\n              ) : null}\r\n              <div className=\"modal-footer\">\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"btn btn-primary\"\r\n                  //onClick={handleEdit}\r\n                >\r\n                  Submit\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn btn-secondary\"\r\n                  onClick={onClose}\r\n                >\r\n                  Close\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Updateinfo;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}